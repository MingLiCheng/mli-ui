---
title: 闭包 closure
---

# 闭包
> 可以在外部作用域中访问到内部作用域中的变量 的 *方法* 是闭包 <br>
> 一个函数和他周围的数据状态捆绑在一起 产生一个词法作用域 静态作用域在定义阶段确定<br>

执行上下文， 代码的执行环境： 全局环境， 函数环境， ~~eval环境(没用)~~<br>
代码执行时会给每个函数生成一个执行上下文， 把当前函数的执行上下文压入栈中（创建阶段） 此过程会生成 作用域链，变量对象，this <br>
当函数真正执行时，会进入到这个函数的执行上下文也就是执行环境中去执行 （执行阶段）<br>

作用域链： 放入栈中的执行上下文可以访问上一层的执行上下文中的变量，直到全局作用域
```javascript
function books() {
  var book = '书本'
  return funtion() {
    console.log(book)
  }
}
var bag = books()
bag()

// 栈： stack:['匿名函数执行上下文','books函数执行上下文','全局执行上下文']
// 作用域链：  匿名函数上下文 ---> books上下文 ----> 全局上下文
```

个人理解
主要是一个函数需要多次执行，每次执行需要用到一个变量 这个变量的状态需要维持， 但不想用全局作用域的变量 这时候就用闭包， 防止污染全局作用域  （个人理解...）
## 实际开发中的闭包
定时器
文件上传 多线程

封装功能函数时常用

